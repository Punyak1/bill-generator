<!-- Input Form -->
<form #invoiceForm="ngForm" (ngSubmit)="onSubmit(invoiceForm)" *ngIf="!formSubmitted">
    <div class="form-group">
      <label>Guest Name:</label>
      <input name="guestName" [(ngModel)]="guestName" required />
    </div>

    <div class="form-group">
      <label>Guest Mobile:</label>
      <input name="guestMobile" [(ngModel)]="guestMobile" required />
    </div>

    <div class="form-group">
      <label for="guestEmail">Guest Email:</label>
      <input name="guestEmail" [(ngModel)]="guestEmail" required placeholder="guest@example.com"/>
    </div>

    <div class="form-group">
        <label>Booking Date:</label>
        <input type="date" name="bookingDate" [(ngModel)]="bookingDate" required />
    </div>

    <div class="form-group">
      <label>Event:</label>
      <input name="event" [(ngModel)]="event" required list="eventSuggestion"/>
        <datalist id="eventSuggestion">
        <option value="Marriage"></option>
        <option value="Birthday"></option>
        <option value="Engagement"></option>
        <option value="Haldi"></option>
        <option value="Mehendi"></option>
        </datalist>
    </div>

    <div class="form-group">
      <label>Total Amount (Incl. GST):</label>
      <input type="number" name="total" [(ngModel)]="total" required/>
    </div>

    <div class="form-group">
      <label>Received Amount:</label>
      <input type="number" name="received" [(ngModel)]="received" required/>
    </div>

    <div class="form-group">
      <label>Invoice Date:</label>
      <input type="date" name="invoiceDate" [(ngModel)]="invoiceDate" required />
    </div>

    <button type="submit">Submit</button>
  </form>
  
  <!-- Invoice Preview -->
  <div #billContent class="invoice-box" *ngIf="formSubmitted">
    <div class="header-section">
      <div class="logo-container">
        <img src="logo.png" alt="ShreeSaiLawns" class="logo-thumbnail" />
      </div>
      <h3>TAX INVOICE</h3>
      <h1 class="property-name">SHRI SAI LAWNS</h1>
      <p class="company-sub">A Unit of "SHRI SAI ENTERPRISES"</p>
      <p class="address">Near Sai Mandir, Kodesia Fatak, Bareilly</p>
      <p>Email: <a href="mailto:shreesailawns@gmail.com">shreesailawns&#64;gmail.com</a> | Phone: 8650063111</p>
      <p>GST No: 09ADRFS4094E1ZJ | State Code: 09 | Place of Supply: Uttar Pradesh</p>
      <p>GST Tax Invoice No: {{ invoiceNumber }} | Invoice Date: {{ invoiceDate }}</p>
      <hr class="section-divider" />
    </div>

    <div class="info-section">
      <div class="left">
        <h4>Guest Information:</h4>
        <p><strong>Guest Name:</strong> {{ guestName }}</p>
        <p><strong>Guest Email:</strong> {{guestEmail}}</p>
        <p><strong>Guest Mobile:</strong> {{ guestMobile }}</p>
      </div>

      <div class="right">
        <h4>Booking Information:</h4>
        <p><strong>Booking Date:</strong> {{bookingDate}}</p>
        <p><strong>Event:</strong> {{ event }}</p>
      </div>
    </div>

    <hr class="section-divider" style="border-top:dotted;"/>

  
    <table class="charges">
      <thead>
        <tr>
          <th>No</th>
          <th>Description</th>
          <th>HSN/SAC Code</th>
          <th>Date</th>
          <th>Taxable Value</th>
          <th>CGST (9%)</th>
          <th>SGST (9%)</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>{{ event }}</td>
          <td>997212</td>
          <td>{{ invoiceDate }}</td>
          <td>₹{{ taxable }}</td>
          <td>₹{{ cgst }} </td>
          <td>₹{{ sgst }} </td>
          <td>₹{{ total }}</td>
        </tr>
      </tbody>
    </table>

    <table class="summary">
    <tr><td><strong>Taxable Amount</strong></td><td>₹{{ taxable }}</td></tr>
    <tr><td><strong>CGST (9%)</strong></td><td>₹{{ cgst }}</td></tr>
    <tr><td><strong>SGST (9%)</strong></td><td>₹{{ sgst }}</td></tr>
    <tr><td><strong>Grand Total</strong></td><td>₹{{ total }}</td></tr>
    <tr><td><strong>Received Amount</strong></td><td>₹{{ received }}</td></tr>
    <tr><td><strong>Due Amount</strong></td><td>₹{{ dueAmt }}</td></tr>
    </table>
  
    <hr class="section-divider" />

    <div class="footer-note">
      <p>This is an auto generated copy, doesn't require any signature. Invoice number is self-generated under GST compliance. </p>
      <p>All Dispute subject to Jurisdiction of Bareilly, Uttar Pradesh Only.</p>
      <p><strong>Bill To:</strong> Guest &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Duty Manager:</strong> Rajeev Jauhari</p>
    </div>
  </div>
  
  <!-- Download Button -->
  <button (click)="generatePDF()" *ngIf="formSubmitted">Download PDF</button>